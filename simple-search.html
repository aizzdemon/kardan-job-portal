<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Simple User Search</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 p-10">

<div class="max-w-md mx-auto bg-white p-6 rounded-xl shadow">
    <h2 class="text-xl font-bold mb-4">User Search</h2>

    <input
        id="searchInput"
        type="text"
        placeholder="Search users..."
        class="w-full p-2 border rounded mb-4"
    >

    <ul id="resultList" class="space-y-2"></ul>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
import {
    getFirestore,
    collection,
    query,
    orderBy,
    startAt,
    endAt,
    getDocs
} from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_PROJECT.firebaseapp.com",
    projectId: "YOUR_PROJECT_ID",
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const searchInput = document.getElementById("searchInput");
const resultList = document.getElementById("resultList");

searchInput.addEventListener("input", async () => {
    const text = searchInput.value.toLowerCase().trim();
    resultList.innerHTML = "";

    if (!text) return;

    const q = query(
        collection(db, "users"),
        orderBy("searchName"),
        startAt(text),
        endAt(text + "\uf8ff")
    );

    const snapshot = await getDocs(q);

    if (snapshot.empty) {
        resultList.innerHTML = `<li class="text-gray-500">No users found</li>`;
        return;
    }

    snapshot.forEach(doc => {
        const user = doc.data();
        const li = document.createElement("li");
        li.className = "p-2 border rounded hover:bg-gray-50";
        li.textContent = user.name;
        resultList.appendChild(li);
    });
});
</script>

</body>
</html>
