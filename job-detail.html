<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>KARDAN Job Details</title>
  <meta name="description" content="Find detailed job descriptions, company information, requirements, perks, and apply directly on KARDAN Job Portal." />
  <meta name="keywords" content="jobs, careers, inside sales, marathi jobs, healthcare jobs, work from home, kardan job portal" />
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js"></script>
</head>
<body class="bg-gray-100 text-gray-900">
  <div class="max-w-3xl mx-auto bg-white shadow-lg rounded-lg p-6 my-10">
    
    <!-- Logo -->
    <div class="flex justify-center mb-6">
      <img id="companyLogo" src="" alt="Company Logo" class="w-28 h-28 object-contain rounded-lg shadow">
    </div>

    <!-- Job Title -->
    <h1 id="jobTitle" class="text-3xl font-bold text-center mb-2">Loading...</h1>
    <p id="companyName" class="text-center text-gray-600 mb-6"></p>

    <!-- Published Date -->
    <p id="publishedDate" class="text-sm text-gray-500 text-center mb-8"></p>

    <!-- About the Company -->
    <div id="aboutCompanySection" class="mb-6 hidden">
      <h2 class="text-xl font-semibold mb-2">About the Company</h2>
      <p id="aboutCompany" class="text-gray-700"></p>
    </div>

    <!-- Job Summary -->
    <div id="jobSummarySection" class="mb-6 hidden">
      <h2 class="text-xl font-semibold mb-2">Job Summary</h2>
      <p id="jobSummary" class="text-gray-700"></p>
    </div>

    <!-- Key Responsibilities -->
    <div id="responsibilitiesSection" class="mb-6 hidden">
      <h2 class="text-xl font-semibold mb-2">Key Responsibilities</h2>
      <ul id="responsibilitiesList" class="list-disc pl-6 text-gray-700"></ul>
    </div>

    <!-- Requirements -->
    <div id="requirementsSection" class="mb-6 hidden">
      <h2 class="text-xl font-semibold mb-2">Requirements</h2>
      <ul id="requirementsList" class="list-disc pl-6 text-gray-700"></ul>
    </div>

    <!-- Perks & Benefits -->
    <div id="benefitsSection" class="mb-6 hidden">
      <h2 class="text-xl font-semibold mb-2">Perks & Benefits</h2>
      <ul id="benefitsList" class="list-disc pl-6 text-gray-700"></ul>
    </div>

    <!-- Timings & Additional Info -->
    <div id="timingsSection" class="mb-6 hidden">
      <h2 class="text-xl font-semibold mb-2">Timings & Additional Info</h2>
      <p id="timingsInfo" class="text-gray-700"></p>
    </div>

    <!-- Apply Button -->
    <div class="text-center mt-8">
      <a id="applyLink" href="#" target="_blank" class="bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition">Apply Now</a>
    </div>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
    import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBeGZBE1u1-y1hDWbRouchgwkgp89D973I",
      authDomain: "kar-kardan.firebaseapp.com",
      projectId: "kar-kardan",
      storageBucket: "kar-kardan.firebasestorage.app",
      messagingSenderId: "554147696994",
      appId: "1:554147696994:web:221dcb883e3b65dcea5c3b",
      measurementId: "G-RRC3X485KQ"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    async function loadJobDetails() {
      const params = new URLSearchParams(window.location.search);
      const jobId = params.get("id");
      if (!jobId) return;

      const docRef = doc(db, "jobs", jobId);
      const docSnap = await getDoc(docRef);

      if (docSnap.exists()) {
        const job = docSnap.data();

        document.getElementById("jobTitle").textContent = job.title || "Job Title";
        document.getElementById("companyName").textContent = `${job.company || "Company"} â€¢ ${job.location || "Location"}`;
        document.getElementById("publishedDate").textContent = job.timestamp ? `Posted on ${new Date(job.timestamp.toDate()).toDateString()}` : "";

        if (job.logo) document.getElementById("companyLogo").src = job.logo;

        if (job.aboutCompany) {
          document.getElementById("aboutCompany").textContent = job.aboutCompany;
          document.getElementById("aboutCompanySection").classList.remove("hidden");
        }

        if (job.summary) {
          document.getElementById("jobSummary").textContent = job.summary;
          document.getElementById("jobSummarySection").classList.remove("hidden");
        }

        if (job.responsibilities && job.responsibilities.length) {
          job.responsibilities.forEach(r => {
            const li = document.createElement("li");
            li.textContent = r;
            document.getElementById("responsibilitiesList").appendChild(li);
          });
          document.getElementById("responsibilitiesSection").classList.remove("hidden");
        }

        if (job.requirements && job.requirements.length) {
          job.requirements.forEach(r => {
            const li = document.createElement("li");
            li.textContent = r;
            document.getElementById("requirementsList").appendChild(li);
          });
          document.getElementById("requirementsSection").classList.remove("hidden");
        }

        if (job.benefits && job.benefits.length) {
          job.benefits.forEach(b => {
            const li = document.createElement("li");
            li.textContent = b;
            document.getElementById("benefitsList").appendChild(li);
          });
          document.getElementById("benefitsSection").classList.remove("hidden");
        }

        if (job.timings) {
          document.getElementById("timingsInfo").textContent = job.timings;
          document.getElementById("timingsSection").classList.remove("hidden");
        }

        if (job.applyLink) {
          document.getElementById("applyLink").href = job.applyLink;
        }

        // Update SEO dynamically
        document.title = `${job.title} at ${job.company} - KARDAN Job Portal`;
        document.querySelector('meta[name="description"]').setAttribute("content", `${job.title} role at ${job.company}. ${job.summary || "Apply now on KARDAN."}`);
      }
    }

    loadJobDetails();
  </script>
</body>
</html>
