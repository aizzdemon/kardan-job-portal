<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BooterSpace Navbar</title>

<!-- Tailwind -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Lucide Icons -->
<script src="https://unpkg.com/lucide@latest"></script>

<style>
  body.search-active > *:not(nav):not(#searchOverlay) {
    filter: blur(6px);
    pointer-events: none;
  }
  .active-link {
    color: #2563eb;
    font-weight: 600;
  }
</style>
</head>

<body class="bg-gray-50">

<!-- ================= NAVBAR ================= -->
<nav class="bg-white shadow-md sticky top-0 z-50 border-b">
  <div class="max-w-7xl mx-auto px-4 py-3 flex justify-between items-center">

    <!-- LOGO -->
    <a href="index.html" class="flex items-center gap-2 text-xl font-extrabold text-blue-700">
      <i data-lucide="users" class="w-6 h-6"></i>
      BooterSpace
    </a>

    <!-- SEARCH -->
    <div class="relative hidden md:block w-96">
      <div class="flex shadow rounded-xl">
        <input id="searchInput"
          placeholder="Search people..."
          class="w-full px-4 py-2 text-sm border rounded-l-xl focus:ring-2 focus:ring-blue-500"/>
        <button class="px-4 bg-blue-600 text-white rounded-r-xl">
          <i data-lucide="search" class="w-4 h-4"></i>
        </button>
      </div>

      <div id="searchSuggest"
        class="absolute hidden mt-2 w-full bg-white rounded-xl shadow-lg max-h-80 overflow-y-auto z-50"></div>
    </div>

    <!-- DESKTOP LINKS -->
    <div class="hidden md:flex items-center gap-6 text-sm font-medium">

      <a href="jobs.html" class="nav-link flex items-center gap-1 text-gray-700 hover:text-blue-600">
        <i data-lucide="briefcase" class="w-4 h-4"></i> Jobs
      </a>

      <a href="dashboard.html" id="dashboardBtn"
        class="nav-link hidden flex items-center gap-1 text-gray-700 hover:text-blue-600">
        <i data-lucide="layout-dashboard" class="w-4 h-4"></i> Dashboard
      </a>

      <a href="profile.html" id="profileBtn"
        class="nav-link hidden flex items-center gap-1 text-gray-700 hover:text-blue-600">
        <i data-lucide="user" class="w-4 h-4"></i> Profile
      </a>

      <a href="login.html" id="loginBtn"
        class="flex items-center gap-1 text-gray-700 hover:text-blue-600">
        <i data-lucide="log-in" class="w-4 h-4"></i> Login
      </a>

      <a href="signup.html" id="signupBtn"
        class="hidden flex items-center gap-1 px-4 py-2 bg-blue-600 text-white rounded-xl">
        <i data-lucide="user-plus" class="w-4 h-4"></i> Sign Up
      </a>

      <button id="logoutBtn"
        class="hidden flex items-center gap-1 text-red-500 hover:text-red-600">
        <i data-lucide="log-out" class="w-4 h-4"></i> Logout
      </button>
    </div>

    <!-- MOBILE MENU BTN -->
    <button id="mobileMenuBtn" class="md:hidden border rounded-md p-2">
      <i data-lucide="menu"></i>
    </button>
  </div>

  <!-- MOBILE MENU -->
  <div id="mobileMenu" class="hidden md:hidden px-4 pb-4 space-y-2 text-sm">

    <a href="jobs.html" class="block flex items-center gap-2">
      <i data-lucide="briefcase"></i> Jobs
    </a>

    <a href="dashboard.html" id="dashboardBtnMobile" class="hidden block flex items-center gap-2">
      <i data-lucide="layout-dashboard"></i> Dashboard
    </a>

    <a href="profile.html" id="profileBtnMobile" class="hidden block flex items-center gap-2">
      <i data-lucide="user"></i> Profile
    </a>

    <a href="login.html" id="loginBtnMobile" class="block flex items-center gap-2">
      <i data-lucide="log-in"></i> Login
    </a>

    <a href="signup.html" id="signupBtnMobile"
      class="hidden block bg-blue-600 text-white px-4 py-2 rounded-xl">
      Sign Up
    </a>

    <button id="logoutBtnMobile" class="hidden text-red-500 flex items-center gap-2">
      <i data-lucide="log-out"></i> Logout
    </button>
  </div>
</nav>

<div id="searchOverlay" class="fixed inset-0 hidden z-40"></div>

<!-- ================= SCRIPT ================= -->
<script type="module">
lucide.createIcons();

import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
import { getAuth, onAuthStateChanged, signOut } from
"https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
import { getFirestore, collection, query, orderBy, startAt, endAt, getDocs } from
"https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyBeGZBE1u1-y1hDWbRouchgwkgp89D973I",
  authDomain: "kar-kardan.firebaseapp.com",
  projectId: "kar-kardan",
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

// ELEMENTS
const dashboardBtns = [dashboardBtn, dashboardBtnMobile];
const profileBtns = [profileBtn, profileBtnMobile];
const loginBtns = [loginBtn, loginBtnMobile];
const signupBtns = [signupBtn, signupBtnMobile];
const logoutBtns = [logoutBtn, logoutBtnMobile];

// MOBILE TOGGLE
mobileMenuBtn.onclick = () => mobileMenu.classList.toggle("hidden");

// AUTH STATE
onAuthStateChanged(auth, user => {
  if (user) {
    loginBtns.forEach(b => b.classList.add("hidden"));
    signupBtns.forEach(b => b.classList.add("hidden"));
    dashboardBtns.forEach(b => b.classList.remove("hidden"));
    profileBtns.forEach(b => b.classList.remove("hidden"));
    logoutBtns.forEach(b => b.classList.remove("hidden"));
  } else {
    loginBtns.forEach(b => b.classList.remove("hidden"));
    signupBtns.forEach(b => b.classList.remove("hidden"));
    dashboardBtns.forEach(b => b.classList.add("hidden"));
    profileBtns.forEach(b => b.classList.add("hidden"));
    logoutBtns.forEach(b => b.classList.add("hidden"));
  }
});

// LOGOUT
logoutBtns.forEach(btn =>
  btn.onclick = async () => {
    await signOut(auth);
    location.reload();
  }
);

// ACTIVE LINK
document.querySelectorAll(".nav-link").forEach(link => {
  if (link.href === location.href) {
    link.classList.add("active-link");
  }
});
</script>

</body>
</html>
