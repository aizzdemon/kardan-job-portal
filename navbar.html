<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BooterSpace Navbar</title>

<script src="https://cdn.tailwindcss.com"></script>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>

<style>
.nav-link{
  display:flex;
  align-items:center;
  gap:6px;
  font-size:12px;
  font-weight:700;
  color:#64748b;
  transition:.25s;
}
.nav-link.active{
  color:#2563eb;
}
.nav-link.active svg{
  stroke:url(#grad);
}
.nav-link:hover{color:#2563eb}
</style>
</head>

<body class="bg-gray-100 dark:bg-gray-900 transition">

<!-- SVG GRADIENT -->
<svg width="0" height="0">
  <defs>
    <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#3b82f6"/>
      <stop offset="100%" stop-color="#9333ea"/>
    </linearGradient>
  </defs>
</svg>

<!-- NAVBAR -->
<nav class="bg-white dark:bg-gray-800 border-b dark:border-gray-700 sticky top-0 z-50">
  <div class="max-w-7xl mx-auto px-4">
    <div class="flex justify-between items-center h-16">

      <!-- LOGO -->
      <a href="index.html" class="flex items-center gap-2 font-bold text-lg dark:text-white">
        âš¡ BooterSpace
      </a>

      <!-- DESKTOP -->
      <div class="hidden md:flex items-center gap-6">
        <a href="index.html" class="nav-link" data-link>ğŸ  Home</a>
        <a href="jobs.html" class="nav-link" data-link>ğŸ’¼ Jobs</a>
        <a href="govt.html" class="nav-link" data-link>ğŸ› Govt</a>
        <a href="result2025.html" class="nav-link" data-link>ğŸ“„ Result</a>
        <a href="profile.html" class="nav-link flex items-center gap-2" data-link>
          <img id="avatar" class="w-7 h-7 rounded-full border" />
          Profile
        </a>

        <a href="dashboard.html" id="dashboardBtn" class="nav-link hidden" data-link>ğŸ“Š Dashboard</a>

        <!-- DARK MODE -->
        <button id="darkToggle" class="nav-link">ğŸŒ™</button>

        <!-- LOGOUT -->
        <button id="logoutBtn" class="nav-link hidden text-red-500">ğŸšª Logout</button>
      </div>

      <!-- MOBILE -->
      <button id="menuBtn" class="md:hidden text-xl">â˜°</button>
    </div>
  </div>

  <!-- MOBILE MENU -->
  <div id="mobileMenu" class="hidden md:hidden px-4 py-3 space-y-3 bg-white dark:bg-gray-800">
    <a href="index.html" class="nav-link" data-link>ğŸ  Home</a>
    <a href="jobs.html" class="nav-link" data-link>ğŸ’¼ Jobs</a>
    <a href="govt.html" class="nav-link" data-link>ğŸ› Govt</a>
    <a href="result2025.html" class="nav-link" data-link>ğŸ“„ Result</a>
    <a href="profile.html" class="nav-link" data-link>ğŸ‘¤ Profile</a>
    <a href="dashboard.html" id="dashboardMobile" class="nav-link hidden" data-link>ğŸ“Š Dashboard</a>
    <button id="logoutMobile" class="nav-link hidden text-red-500">ğŸšª Logout</button>
    <button id="darkToggleMobile" class="nav-link">ğŸŒ™ Dark Mode</button>
  </div>
</nav>

<!-- TOAST -->
<div id="toast" class="hidden fixed bottom-6 right-6 bg-black text-white px-4 py-2 rounded shadow z-50">
  Logging out...
</div>

<script>
/* FIREBASE */
firebase.initializeApp({
  apiKey: "AIzaSyBeGZBE1u1hDWbRouchgwkgp89D973I",
  authDomain: "kar-kardan.firebaseapp.com",
  projectId: "kar-kardan"
});
const auth = firebase.auth();
const db = firebase.firestore();

/* ELEMENTS */
const logoutBtn = document.getElementById('logoutBtn');
const logoutMobile = document.getElementById('logoutMobile');
const dashboardBtn = document.getElementById('dashboardBtn');
const dashboardMobile = document.getElementById('dashboardMobile');
const avatar = document.getElementById('avatar');
const toast = document.getElementById('toast');
const menuBtn = document.getElementById('menuBtn');
const mobileMenu = document.getElementById('mobileMenu');

/* MOBILE */
menuBtn.onclick = () => mobileMenu.classList.toggle('hidden');

/* ACTIVE LINK */
document.querySelectorAll('[data-link]').forEach(link=>{
  if (window.location.pathname.includes(link.getAttribute('href'))) {
    link.classList.add('active');
  }
});

/* AUTH */
auth.onAuthStateChanged(async user=>{
  if(!user) return;

  logoutBtn.classList.remove('hidden');
  logoutMobile.classList.remove('hidden');

  avatar.src = user.photoURL || "https://api.dicebear.com/7.x/initials/svg?seed=User";

  const doc = await db.collection('users').doc(user.uid).get();
  if(doc.exists && doc.data().role === 'job_provider'){
    dashboardBtn.classList.remove('hidden');
    dashboardMobile.classList.remove('hidden');
  }
});

/* LOGOUT TOAST */
function logout(){
  toast.classList.remove('hidden');
  auth.signOut().then(()=>{
    setTimeout(()=>location.href="index.html",1200);
  });
}
logoutBtn.onclick = logoutMobile.onclick = logout;

/* DARK MODE */
const toggleDark = ()=>{
  document.documentElement.classList.toggle('dark');
  localStorage.theme = document.documentElement.classList.contains('dark') ? 'dark' : 'light';
};
darkToggle.onclick = darkToggleMobile.onclick = toggleDark;
if(localStorage.theme==='dark') document.documentElement.classList.add('dark');
</script>

</body>
</html>
