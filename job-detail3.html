<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Job Details ‚Äì BooterSpace</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<script src="https://cdn.tailwindcss.com"></script>

<!-- Firebase COMPAT -->
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"/>

<style>
body { background:#f8fafc; font-family: 'Plus Jakarta Sans', sans-serif; }
.job-card { background:#fff; border-radius:24px; box-shadow: 0 10px 25px -5px rgba(0,0,0,0.05); }
.gradient-border::after {
  content:'';
  position:absolute; top:0; left:0; right:0;
  height:6px;
  background:linear-gradient(90deg,#2563eb,#60a5fa);
  border-radius:24px 24px 0 0;
}
.shimmer {
  background: linear-gradient(90deg,#f1f5f9 25%,#e2e8f0 50%,#f1f5f9 75%);
  background-size:200% 100%;
  animation: shimmer 1.5s infinite;
}
@keyframes shimmer {
  0% { background-position:200% 0 }
  100% { background-position:-200% 0 }
}
.custom-modal {
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.5);
  align-items:center;
  justify-content:center;
  z-index:1000;
}
</style>
</head>

<body>

<!-- NAVBAR -->
<div id="navbar"></div>
<script>
fetch("navbar.html").then(r=>r.text()).then(html=>{
  document.getElementById("navbar").innerHTML = html;
  const s = document.createElement("script");
  s.type="module"; s.src="navbar.js";
  document.body.appendChild(s);
});
</script>

<!-- HEADER -->
<header class="bg-white border-b py-10 text-center">
  <h1 class="text-3xl font-black">Booter<span class="text-blue-600">Space</span></h1>
  <p class="text-sm text-gray-500 mt-2">Explore your career opportunities</p>
</header>

<!-- MAIN -->
<main class="max-w-7xl mx-auto px-4 py-10">
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">

    <!-- LEFT : JOB DETAILS -->
    <div class="lg:col-span-2">
      <div id="jobDetailsContent" class="job-card gradient-border p-6 md:p-10 relative">
        <div class="space-y-6">
          <div class="flex gap-4">
            <div class="w-16 h-16 shimmer rounded-xl"></div>
            <div class="flex-1">
              <div class="h-8 w-1/2 shimmer rounded mb-2"></div>
              <div class="h-4 w-1/4 shimmer rounded"></div>
            </div>
          </div>
          <div class="h-48 shimmer rounded-2xl"></div>
        </div>
      </div>
    </div>

    <!-- RIGHT : MISSION -->
    <div>
      <div class="bg-white rounded-2xl shadow-md p-6 sticky top-24">
        <h3 class="text-lg font-bold mb-3">üíô Our Mission for Job Seekers</h3>
        <p class="text-sm text-gray-600 leading-relaxed mb-4">
          We are building this platform with one clear mission ‚Äî
          <b>to help job seekers find the right job, without any cost.</b><br><br>
          This project is created with dedication, research, and continuous effort.
          We carefully research and list job opportunities so job seekers can apply from one place.<br><br>
          Our platform is <b>100% free</b>, easy to use, reliable, and constantly improving.<br><br>
          Your feedback means a lot to us.
        </p>
        <button onclick="openFeedbackModal()"
          class="w-full bg-blue-600 text-white py-3 rounded-xl font-bold hover:bg-blue-700">
          üí¨ Give Feedback
        </button>
      </div>
    </div>

  </div>
</main>

<!-- ALERT MODAL -->
<div id="alertModal" class="custom-modal">
  <div class="bg-white p-6 rounded-2xl max-w-sm w-full">
    <h3 id="alertTitle" class="font-bold mb-2"></h3>
    <p id="alertMsg" class="text-gray-600 mb-4"></p>
    <button onclick="closeAlert()" class="w-full bg-blue-600 text-white py-3 rounded-xl">Close</button>
  </div>
</div>

<!-- FEEDBACK MODAL -->
<div id="feedbackModal" class="custom-modal">
  <div class="bg-white p-6 rounded-2xl max-w-md w-full">
    <h3 class="font-bold mb-4">Share Your Feedback</h3>
    <input id="feedbackEmail" type="email" placeholder="Email (required)"
      class="w-full border p-3 rounded-lg mb-3">
    <textarea id="feedbackText" rows="4" placeholder="Write feedback..."
      class="w-full border p-3 rounded-lg mb-4"></textarea>
    <div class="flex gap-3">
      <button onclick="submitFeedback()" class="flex-1 bg-blue-600 text-white py-3 rounded-xl">Submit</button>
      <button onclick="closeFeedbackModal()" class="flex-1 bg-gray-100 py-3 rounded-xl">Cancel</button>
    </div>
  </div>
</div>

<script>
const firebaseConfig = {
  apiKey:"AIzaSyBeGZBE1u1-y1hDWbRouchgwkgp89D973I",
  authDomain:"kar-kardan.firebaseapp.com",
  projectId:"kar-kardan"
};
firebase.initializeApp(firebaseConfig);
const auth=firebase.auth();
const db=firebase.firestore();
let currentUser=null;
let currentJobId=new URLSearchParams(location.search).get("id");

auth.onAuthStateChanged(u=>currentUser=u);

function showAlert(t,m){
  alertTitle.innerText=t;
  alertMsg.innerText=m;
  alertModal.style.display="flex";
}
function closeAlert(){ alertModal.style.display="none"; }

function openFeedbackModal(){ feedbackModal.style.display="flex"; }
function closeFeedbackModal(){ feedbackModal.style.display="none"; }

async function submitFeedback(){
  const email=feedbackEmail.value.trim();
  const msg=feedbackText.value.trim();
  if(!email) return showAlert("Email Required","Email is mandatory");
  if(!msg) return showAlert("Feedback Required","Please write feedback");

  await db.collection("feedbacks").add({
    email, message:msg,
    jobId:currentJobId||null,
    userId:currentUser?currentUser.uid:null,
    createdAt:firebase.firestore.FieldValue.serverTimestamp()
  });

  closeFeedbackModal();
  showAlert("Thank You ‚ù§Ô∏è","Thank you for your important feedback. We need your love and support to do more for you.");
  feedbackEmail.value="";
  feedbackText.value="";
}
</script>

</body>
</html>
