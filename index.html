<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Page ka character format -->
  <meta charset="UTF-8" />

  <!-- Responsive banane ke liye -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Page title -->
  <title>BooterSpace | Jobs for Everyone</title>

  <!-- Tailwind CSS (Design ke liye) -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100">

  <!-- ================= NAVBAR ================= -->
  <!-- Navbar yaha load hoga (JS se) -->
  <div id="navbar"></div>

  <!-- ================= HERO SECTION ================= -->
  <section class="bg-white py-10">
    <div class="max-w-6xl mx-auto px-4">

      <!-- Main Heading -->
      <h1 class="text-3xl font-bold text-gray-800 mb-2">
        Find Your Dream Job ðŸš€
      </h1>

      <!-- Sub Heading -->
      <p class="text-gray-600">
        Latest private, government & featured jobs in one place
      </p>

    </div>
  </section>

  <!-- ================= JOB CATEGORY TABS ================= -->
  <section class="max-w-6xl mx-auto px-4 mt-8">

    <!-- Tabs container -->
    <div class="flex gap-6 border-b mb-6">

      <!-- Featured Jobs -->
      <button onclick="loadJobs('featured')" 
        class="tab-btn text-blue-600 font-semibold border-b-2 border-blue-600 pb-2">
        Featured Jobs
      </button>

      <!-- Govt Jobs -->
      <button onclick="loadJobs('govt')" 
        class="tab-btn text-gray-600 hover:text-blue-600 pb-2">
        Govt. Jobs
      </button>

      <!-- Latest Updates -->
      <button onclick="loadJobs('latest')" 
        class="tab-btn text-gray-600 hover:text-blue-600 pb-2">
        Latest Updates
      </button>

    </div>

    <!-- ================= JOB LIST ================= -->
    <!-- Firebase se jobs yaha show hongi -->
    <div id="jobList" class="grid md:grid-cols-2 gap-6">
      <!-- Jobs JS se inject hongi -->
    </div>

  </section>

  <!-- ================= FIREBASE + JS ================= -->
  <script type="module">

    /* ================= FIREBASE IMPORTS ================= */

    // Firebase App init karne ke liye
    import { initializeApp } from 
    "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";

    // Firestore database ke liye
    import { getFirestore, collection, query, where, getDocs } from 
    "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    // Auth ke liye
    import { getAuth, onAuthStateChanged, signOut } from 
    "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

    /* ================= FIREBASE CONFIG ================= */

    const firebaseConfig = {
      apiKey: "AIzaSyBeGZBE1u1-y1hDWbRouchgwkgp89D973I",
      authDomain: "kar-kardan.firebaseapp.com",
      projectId: "kar-kardan",
      storageBucket: "kar-kardan.firebasestorage.app",
      messagingSenderId: "554147696994",
      appId: "1:554147696994:web:221dcb883e3b65dcea5c3b"
    };

    // Firebase initialize
    const app = initializeApp(firebaseConfig);

    // Firestore database instance
    const db = getFirestore(app);

    // Auth instance
    const auth = getAuth(app);

    /* ================= NAVBAR LOAD ================= */

    const navbarDiv = document.getElementById("navbar");

    // User login hai ya nahi check karta hai
    onAuthStateChanged(auth, (user) => {

      if (user) {
        // Agar user logged in hai
        navbarDiv.innerHTML = `
          <nav class="bg-white shadow p-4 flex justify-between">
            <h2 class="font-bold text-xl">BooterSpace</h2>
            <div class="flex gap-4">
              <span class="text-gray-600">${user.email}</span>
              <button id="logoutBtn" class="text-red-500 font-semibold">
                Logout
              </button>
            </div>
          </nav>
        `;

        // Logout button ka action
        document.getElementById("logoutBtn").onclick = () => {
          signOut(auth);
        };

      } else {
        // Agar user login nahi hai
        navbarDiv.innerHTML = `
          <nav class="bg-white shadow p-4 flex justify-between">
            <h2 class="font-bold text-xl">BooterSpace</h2>
            <a href="login.html" class="text-blue-600 font-semibold">
              Login
            </a>
          </nav>
        `;
      }
    });

    /* ================= JOB LOAD FUNCTION ================= */

    // Job category ke hisaab se jobs load karega
    window.loadJobs = async (type) => {

      const jobList = document.getElementById("jobList");

      // Purani jobs clear
      jobList.innerHTML = "Loading jobs...";

      // Firestore query
      const q = query(
        collection(db, "jobs"),
        where("category", "==", type)
      );

      const querySnapshot = await getDocs(q);

      jobList.innerHTML = "";

      // Agar koi job nahi mili
      if (querySnapshot.empty) {
        jobList.innerHTML = "<p>No jobs found</p>";
        return;
      }

      // Har job ko show karna
      querySnapshot.forEach((doc) => {

        const job = doc.data();

        jobList.innerHTML += `
          <div class="bg-white p-4 rounded shadow">
            <h3 class="font-bold text-lg">${job.title}</h3>
            <p class="text-gray-600">${job.company}</p>
            <p class="text-sm text-gray-500">${job.location}</p>
          </div>
        `;
      });
    };

    // Page load hote hi Featured Jobs load hon
    loadJobs("featured");

  </script>

</body>
</html>
